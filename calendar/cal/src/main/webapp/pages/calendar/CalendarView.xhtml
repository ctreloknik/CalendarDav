<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="calendarForm">
		<nav class="navbar navbar-default">
		<div class="container-fluid">
			<ul class="nav navbar-nav">
				<li class="active"><a href="#" onclick="openDialog()">Ссылка</a></li>
			</ul>

			<p:commandButton value="Создать событие" oncomplete="openDialog()"
				style=" top: 5px;" />
			<p:commandButton value="Приглашения" style=" top: 5px;"
				oncomplete="openInvitesDialog()" />

			<ul class="nav navbar-nav navbar-right">
				<p:commandButton value="Выход" actionListener="#{eventHome.logout()}" style=" top: 5px;" />
			</ul>
		</div>
		</nav>

		<div class="col-md-3" style="width: 280px; left: 5px;">
			<p:calendar id="calendar" widgetVar="calendar"
				value="#{calendarHome.calendarDate}" mode="inline" navigator="true"
				pages="1">
				<p:ajax event="dateSelect" listener="#{eventsList.onDateSelect}"
					update="eventsListDetails" />
			</p:calendar>

			<p:outputLabel value="Фильтр по категориям:" />
			<p:selectCheckboxMenu id="filterCategories"
				widgetVar="filterCategories"
				style="min-width: 200px; display: block"
				value="#{eventsList.selectedCategories}" label="Категории"
				filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
				<f:selectItems value="#{eventsList.allCategories}" />
			</p:selectCheckboxMenu>

			<p:commandButton value="Отфильтровать" style="top: 5px;"
				oncomplete="updateEventsList()" />

		</div>

		<div class="col-md-9">
			<ui:include src="/pages/calendar/EventsList.xhtml" />
		</div>

		<p:remoteCommand name="openDialog"
			action="#{eventHome.preCreateEvent()}"
			update=":calendarForm:eventEditDlg"
			oncomplete="PF('eventEditDlg').show();"></p:remoteCommand>

		<p:remoteCommand name="openInvitesDialog"
			update=":calendarForm:invitesTable"
			oncomplete="PF('invitesDlg').show();"></p:remoteCommand>

		<p:remoteCommand name="updateEventsList"
			action="#{eventsList.getEventsByFilter()}" update="eventsListDetails"></p:remoteCommand>

		<ui:include src="/pages/calendar/dailogs/EventEditDlg.xhtml" />
		<ui:include src="/pages/calendar/dailogs/InvitesDlg.xhtml" />
	</h:form>
</ui:composition>
